For the latest news, visit the Linux Cafe at the PegaSoft web site. 

SparForte 2.0's focus was on symbol table changes to support packages, and extending the maximum number of reserved words so more keywords can be defined.

CHANGES SINCE 1.5

1. Change: configure modified for FreeBSD 10 and ADAVOX code (commented out) removed.  Doesn't fully work on FreeBSD 10 yet.

2. Fix: eliminated warnings on newer versions of gcc for tinyserver buffer and apq printf formatting one one line

3. Fix: trailing whitespace check no longer crashes with separate files.

4. New: more Standard OpenGL functions (not documented yet) :
   glnormal3b,         glnormal3d,         glnormal3f,        glnormal3i,
   glnormal3s,         glindexd,           glindexf,          glindexi,
   glindexs,           glrectd,            glrectf,           glrecti,
   glrects,            gllightf,           gllighti,          gltexcoord1d,
   gltexcoord1f,       gltexcoord1i,       gltexcoord1s,      gltexcoord2d,
   gltexcoord2f,       gltexcoord2i,       gltexcoord2s,      gltexcoord3d,
   gltexcoord3f,       gltexcoord3i,       gltexcoord3s,      gltexcoord4d,
   gltexcoord4f,       gltexcoord4i,       gltexcoord4s,      glscaled,
   glscalef,           gldepthmask,        gldepthrange,      glenableclientstate,
   gldisableclientstate, glpushattrib,     glpopattrib,       gllightmodelf,
   gllightmodeli,      glmaterialf,        glmateriali,       glpixelzoom,
   glpixelstoref,      glpixelstorei,      glpixeltransferf,  glpixeltransferi,
   glstencilmask,      glstencilop,        glclearstencil,    glstencilfunc,
   gltexgend,          gltexgenf,          gltexgeni,         gltexenvf,
   gltexenvi,          gltexparameterf,    gltexparameteri,   glbindtexture,
   glcolormaterial,    glfogf,             glfogi,            glpassthrough,
   glinitnames,        glloadname,         glpushname,        gopopname,
   [not all tested] 

5. New: OpenGL extension functions

6. Change: byte code changed - reserved word limit moved from 128 to 8192.

7. New: reserved words interface, overriding, some, synchronized.  There are in Ada 2005, 2012 but are not used in SparForte.  Reserved for compatibility reasons.

8. Change: containers package was declared in parser_doubly now extracted into separate package.

9. New: vectors (singly linked list) package. new_vector, clear, to_vector, capacity, reserve_capacity, length, set_length, is_empty, append, prepend, first_index, last_index, element [not finished], first_element, last_element, delete_first, delete_last, contains, move, reverse_elements, flip [docs needed] [tests needed]

10. Change: new, faster identifier search function. [pen enums not modified for this]

11. Fix: constants with enumerated values no longer confused with the enumerated value itself.  (e.g. b : boolean := true; ? true; will show "true" not "b").

12. Split byte code compiler into a separate file, removing it from the scanner.

13. Change: pragma advise, annotate, blocked, clarify, depreciated/deprecated, dispute, propose, refactor, todo now accept static string expressions instead of a string literal. [negative tests needed]

14. New: System.Design_Phase, System.Development_Phase, System.Maintenance_Phase, System.Testing_Phase, reflecting the command line options.

15. New: policy blocks.  static if and static case allowed in policy blocks. [docs needed] [tests needed] [needs to work outside of sparforte_policy]

16. New: policy, configuration are reserved words.

17. Fix (needed): env with AdaScript parameters gives error on semi-colon at end of command.

18. New: Additional command line editing keys: PC keyboard Home (= control-a), End (= control-e), and Del (= new Control-u / ESC x).

19. btree_io (Berkeley DB library added).  append, has_element, clear, increment, close, is_open, close_cursor, last_error, create, new_cursor, decrement, new_file, delete, prepend, flush, raise_exceptions, get, remove, get_first, replace, get_last, set, get_next, will_raise, open, open_cursor, truncate.

20. Fix: Berkeley DB gen_constants script generates dummy values for missing constants.

21. Fix (Terry Droeger): Julian dates finished and working correctly.

22. Fix (Terry Droeger): Argument count (in CGI) calls CGI argument count explicitly.

23. Fix (Terry Droeger): Removed extraneous references to gnat.cgi from two files.  This should fix the CGI POST issues, but both CGI libraries should not be installed at the same time as both read from standard input when they elaborate.  Confirmed CGI POST is now working.

24. New (Terry Droeger): OpenGL can be disabled with --without-opengl.

25. Change: AdaCGI package rewritten to defer reading standard input.

26. New: dbm package.  connect, append, prepare, append_line, append_quoted, execute, execute_checked, disconnect, is_connected, reset, error_message, databases, in_abort_state, options, set_rollback_on_finalize, open_db_trace, will_rollback_on_finalize, close_db_trace,  set_trace, is_trace, clear, raise_exceptions, report_errors, begin_work, rollback_work, commit_work, rewind, fetch, end_of_query, tuple, tuples, columns, column_name, column_index, is_null, value, engine_of, show, list, schema, users, new_connection, new_query, fetch_values, notice_message, append_for_insert, append_for_update.

27. Change: Refactoring done to database packages.  db.reset not working, not sure why.

28. New (Jedi Tek'unum): Initial support for Darwin (OS/X)...not fully implemented, doesn't build yet.

29. New. renames (identifier dereferencing)...variable declaration renaming.  This involved some major design changes in how variable storage is handled. [renamings of proc, funcs] 
Examples:
   a : integer renames i;
   b : arrtype renames some_array;
   c : integer renames some_array(1);
   d : rectype renames r;
   e : rectype renames r.f;

30. New: support for in, out and in out parameters in user-defined functions and procedures.  Supports scalar and aggregate types. [unset needs updating]

31. Fix: shell command no longer errors after a begin.

32. Fix: mysql parser no longer has errors when compiling with --without-mysql.

33. Fix: records are no longer treated as unused when only fields of the record are referenced.

34. Fix: using an array index on a scalar variable no longer raises a storage error.

35. Fix: using an undefined element type in an array declaration no longers leaves a half-declared variable.

36. Fix: using an assignment in an array declaration now has a custom error and no longer leaves a half-declared variable.

37. Fix: additional dup2 EINTR checks in shell pipeline execution added to hopefully eliminate (or reduce) intermittent interrupted system call errors.

38. Fix: declarations using record subtypes now working, but not fully tested.  Creating a derived type from a record is now a "not implemented" error.

39. New: GNU readline now the default command line input function.  The old Ada function can be used if you use the new configure flag --without-readline.

40. Change: pragma import / import_json rejects imports to predefined types (or subtypes).  Type assume the user will want a different type to mark data as unvalidated/untrusted (at a minimum) and the value will need to go through a validation subprogram before use.  unchecked_import does not have this restriction.

41. New: Raspberry Pi 3 support in configuration file.

42. Fix: help produces help for scripts again (misspelled annotate).

43. Fix: if no template type is specified, HTML is assumed for compatibility with older versions of SparForte.

44. Fix: pragma test_result now works with templates.

45. Change: internal errors in world package now raise exceptions instead of printing a message to standard error.

46. Change: some errors rewritten to use err() to improve chances of displaying in a template.

47. Change: pragma template no longer immediately writes a HTTP header.  The header is now written on-demand on an error or when template execution starts.

48. New: template package: put_template_header, set_http_status, set_http_location. [docs needed] [tests needed]

49. New. --perf/-p command option to show source code metrics and performance statistics.  It can be combined with --check/-c command option to hide performance statistics.

50. Fix (Zhu Qun-Ying): Overhaul of configure script handling of databases, should eliminate the problem of compiling for a single database.  The release testing now tests all "without" flags, building SparForte with each of them to ensure they work.

