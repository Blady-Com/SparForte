For the latest news, visit the Linux Cafe at the PegaSoft web site. 

SparForte 1.3's focus was on removing barriers to scaling.

KNOWN BUGS

- integer type casting is not working on parameters
- freebsd rounding of 2.5 fails because freebsd rounds down instead of up (FreeBSD Ada bug??)

CHANGES

1. New: pragma restriction( no_mysql_database / no_postgresql_database ) to disable connections to a database engine.

2. Change: more error detection on pragma import / export / unchecked_import

3. New: pragma license - declare a script's license

4. New: System.Script_License - read the license name in a running script

5. New: help -l - read a script license without running a script

6. New: memcache package.  add( cl, k, v ), prepend( cl, k, v ), append( cl, k, v ), register_server( cl, h, p ), clear_servers( cl ), replace( cl, k, v ), delete( cl, k ), set( cl, k, v ), flush( cl ), set_cluster_name( cl, s ), is_valid_memcache_key( k ), set_cluster_type( cl, e ), v := get( cl, k ), s := stats( cl ), cl := new_cluster, s := version( cl )

7. New: memcache.highread package.  add( cl, k, v ), prepend( cl, k, v ), append( cl, k, v ), register_alpha_server( cl, h, p ), register_beta_server( cl, h, p ), clear_servers( cl ), replace( cl, k, v ), delete( cl, k ), set( cl, k, v ), flush( cl ), set_cluster_name( cl, s ), set_cluster_type( cl, e ), v := get( cl, k ), s := stats( cl ), cl := new_cluster, s := version( cl )

8. Change: -n / --no-check command option dropped.  It is incompatible with include files / separate procuedures and functions.

9. New: with include and separate declaration files have been backported into SparForte from the BUSH 2.0 code base.

10. Fix: ] is escaped when searching in globbing pattern for shell words.

11. Fix: Dollar expansion variables names now terminated by first non-alpha/underscore character, which is more like a typical Bourne shell.

12. Fix: "error in globbing expression" expressions no longer raised on shell words with characters that cannot be globbed.

13. New: Additional template types: css, js, json, wml and xml.

14. Change: Reorganized regression testsuite.

15. Fix: string space handling in shell word splitting.

16. Fix: double spaces being dropped inside of string literals on command line.

17. Fix: assignment variable unset for an errornous assignment part

18. New: pragma restriction( annotations_not_optional )

19. New: pragma restriction( no_annotate_todos )

20. New: Check for unreachable code after return command.

21. New: Check for unreachable code after stand-alone exit command.

22. Fix: Out parameters no longer overwrite the type of an existing variable.

23. New: JSON subprograms: arrays.to_array, arrays.to_json, records.to_json, records.to_record.  New data type: json_string.

24. New: JSON subprograms: strings.to_json

25. Fix: New updated spar.vim syntax file for download for the VIM vi editor.

26. New: pragma import_json.

27. Change: JSON capabilities now implement recusion so they can handle arrays and records with json_string components.

28. Change: make configuration now uses two processes instead of one for
faster builds.

29. New: Pen subprogram: pen.save_canvas.

30. Change: for variable is now a constant.  Assignment to constant (with a
warning) now permitted at a breakout prompt.

31. New: configure option "--without-sound".  Backported from Bush 2.0.

32. New: gnat.crc32 package.  Backported from Bush 2.0.

33. New: boolean true shortcut.  Simply stating a boolean variable asserts
that it is true.  Not allowed under pragma ada_95.

34. Fix: pragma import no longer marks a variable as imported if the import
fails (thus no longer preventing the user to try again at the command prompt).

35. Fix: pragma import cgi works again (searching for correct variable name).

36. Fix: pragma unchecked_import cgi works again (searching for correct variable name, not incorrectly checking for variable in the environment).

37. Change: new pen.paint_ellipse procedure, pen.fill_ellipse now matches pen.fill_rect parameters.

38. New: --test / -t option to enable test mode and pragma test for unit
testing.  pragma test().  pragma test_result().

39. New: pragma restriction( no_memcache )

40. Fix: pragma gcc_errors no longer requires an unnecessary expression.

41. New: pragma export_json.

42. Fix: package documentation cleanup and help command updated accordingly.

43. New: pragma unchecked_import_json.

44. New: cgi.put_cgi_header default header "content-type" spelling mistake
corrected.

45. Fix: pragma import/unchecked_import( cgi ) handles missing variables
correctly.

46. New: numerics.fnv_hash_of, numerics.hash_of, numerics.murmur_hash_of,
numerics.sdbm_hash_of.  Backported from Bush 2.0.

47. Fix: whattime.sp example now uses number * string in correct order.

48. New: New examples: gray.sp

49. New: pragma software_model and System.Script_Software_Model - set and read
the software model name in a running script

50. Fix: pragma annotate( see also,... ) now pragma annotate( see_also,...)

51. Fix: no longer auto-declare identifiers containing a period.

52. Fix: semicolon( ';' ) as a command name produces a "statement expected"
error instead of being treated as a legitimate command name.

53. Fix: without-mysql/without-postgres - configure substitutes correct libraries im
GNUmakefile.

54. Change: cd displays "cannot access" rather than "no such path", bringing
it in line with Bash but also more accurate error message.

55. Fix: pg_config is called in configure but it returns the libraries used to
build the PostgreSQL server, not to use libpq.  Many unnecessary libraries are
required.  A patch has been made to use sed to remove the extra libraries.
More libraries might be removable.  Also backported some APQ GNUmakefile stuff
from Bush 2.0.

56. Fix: tab completion works properly on directories '.', './', '..' and
'../'.  Also used Dir_Separator in user_io.adb for better O/S independence.

57. Fix: tab completion works properly when the final character differs
between 2 or more candidates.

58. Fix: broken shell redirections (e.g. 2>&1) now working again.

59. Fix: unknown pragmas no longer raise an uncaught exception.

60. Fix: possibly a Linux GCC Ada bug, read syscall() returns a high positive
number on an EINTR error instead of a negative number.  It may be a problem with
GCC Ada's size_t definition.  I've kludged the EINTR checks to look for <0 or
18446744073709551615 to ensure EINTR's are caught.  This was causing weird
errors when the last command in a pipeline failed.

