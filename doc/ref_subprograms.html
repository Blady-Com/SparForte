<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/transitional.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <META NAME="description" CONTENT="SparForte language documentation">
	<title>SparForte - Reference - Block Statements and Subprograms</title>
	<link rel="StyleSheet" type="text/css" media="screen" href="art/sparforte.css">
</head>
<body bgcolor="#FFFFFF"><a name="top"></a>
	<table width="100%" cellspacing="0" cellpadding="0" summary="page layout">
		<tr><td align="left"><img src="art/sparforte.png" alt="[SparForte]"></td><td align="right"><img src="art/header_cloud.png" alt="[Banner]"></td></tr>
		<tr><td background="art/header_border.png" height="10" colspan="2"></td></tr>
		<tr><td colspan="2"><table width="100%" border="0" cellspacing="0" cellpadding="0" summary="top menu">
			<tr>
				<td width="10"><img src="art/menu_left.png" alt="[Top Main Menu]"></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="intro_preface.html">Intro</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="tutorial_1.html">Tutorials</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="ref_adascript.html"><b>Reference</b></a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="packages.html">Packages</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="../examples/index.html">Examples</a></td>
				<td background="art/menu_border.png" align="center"><span class="menutext">|</span></td>
				<td width="85" background="art/menu_border.png" align="center"><a class="menutext" href="cont_vision.html">Contributors</a></td>
				<td background="art/menu_border.png" align="center">&nbsp;</td>
				<td background="art/menu_border.png" align="right"><a href="ref_extcmds.html"><img src="art/left_arrow.png" width="27" height="24" alt="[Back Page]" border="0"></a><span class="menutext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="ref_sockets.html"><img src="art/right_arrow.png" width="27" height="24" alt="[Next Page]" border="0"></a></td>
				<td background="art/menu_border.png">&nbsp;</td>
</tr></table></td></tr>
	</table>
	<noscript>
	<a href="#submenu">[Jump to Submenu]</a>
	<hr />
	</noscript>
	<table width="100%" border="0" cellspacing="0" cellpadding="0" summary="content and right submenu">
		<tr>
			<td align="left" valign="top">
	<!-- Content Area -->
<h2><a name="3.23"></a>Block Statements and Subprograms</h2>

<p>Bush scripts can be organized using declare blocks, procedures and
functions.  This enables pieces of a program to be easily reused.
A procedure is a routine that can be called but returns no value.
For example, <tt>put_line</tt> is a procedure.  A function always
returns a value so it can be used as part of an expression.
<tt>strings.length</tt> is an example of a function which responds
with the length of a string.</p>

<h3>Overall Structure</h3>

<p>An AdaScript script consists of a sequence of executable statements.
These statements can appear as a simple list or can be enclosed in
a "library" unit.  The basic library unit is a main procedure (or
sometimes called a main program or main subprogram).  Other library
units may be introduced in the future (such as packages).</p>

<p>If <tt>pragma ada_95</tt> is used, the statements must be enclosed in a
library unit.</p>

<p>Some features may not be available with a simple list of
statements.</p>

<h3>Declare Block</h3>

<p>Declare blocks allow variables to be declared in the executable part
of a script.  Between <tt>declare</tt> and <tt>begin</tt>, declarations can be made.
Between <tt>begin</tt> and <tt>end</tt> are executable statements.  The declarations
are visible to these executable statements.</p>

<p>A new block can be created without declaration any
variables by using begin...end without the declare section.<br>
</p>

        <center>
        <div class="code">
                <p class="code">
<b>declare</b><br>
&nbsp;&nbsp; i : integer := 5;<br>
<b>begin</b><br>
&nbsp;&nbsp; ? i;<br>
<b>end;</b><br>&nbsp;<br></p>
        <div class="code_caption">
                <b>Example</b>: The Declare Block Statement
        </div>
        </div>
        </center>

<h3>Procedure and Function Blocks</h3>

<p>Repeatable blocks of instructions (like Perl sub or Python def) can
be created with the word <tt>procedure</tt> or <tt>function</tt>.&nbsp; A procedure is a
set of instructions with a name.&nbsp; A function is a set of
instructions with a name that returns a value so it can be used in an
expression.&nbsp; Like a declare block, local variables can be declared
before the word <tt>begin</tt>.  Procedure and function subprograms
must finish with <tt>end</tt> and the name of the subprogram: this is
to clarify the structure of the program.</p>

<p><b>Ada</b>: In Ada, the name of the subprogram is optional after
<tt>end</tt>.  In AdaScript, the name is required.</p>

        <center>
        <div class="code">
                <p class="code">
<b>procedure</b> print_title <b>is</b><br>
<b>begin</b><br>
&nbsp;&nbsp; put_line( "Script to Process New Orders" );<br>
&nbsp;&nbsp; new_line;<br>
<b>end</b> print_title;
<br>&nbsp;<br></p>
        <div class="code_caption">
                <b>Example</b>: The Procedure Subprogram Statement
        </div>
        </div>
        </center>

<p>Procedures and functions may be nested: you can declare them in the
declaration parts of another procedure, function or declare block.
These nested subprograms only exist for the scope of this parent
block.</p>

<p>A procedure may be terminated early using a <tt>return</tt>
statement.  A function uses <tt>return</tt> to return back a
value.</p>

<p><b>Ada</b>: AdaScript doesn't support creating new arithmetic
operators by defining functions with operator symbols.</p>

<h3>Procedure and Function Parameters</h3>

<p>Both procedures and functions can have parameters.&nbsp;  If a
procedure or function has no parameters, do not include any
parantheses.  If there are parameters, they are listed with
a name, a mode and a type.  All parameters are "in" mode
parameters: they give additional information to a subprogram
and are treated as constants.&nbsp; The word "in" is optional
before the type of parameter.</p>

        <center>
        <div class="code">
                <p class="code">
<b>function</b> add_two( number : integer ) <b>return</b> integer <b>is</b><br>
<b>begin</b><br>
&nbsp; <b>return</b> number+2;<br>
<b>end</b> add_two;<br>
<br>&nbsp;<br></p>
        <div class="code_caption">
                <b>Example</b>: The Function Subprogram Statement
        </div>
        </div>
        </center>

<p>Procedures and functions can only declared inside the declaration section of
a script's main procedure block (or declared nested inside other subprograms
or declare blocks).</p>

        <center>
        <div class="code">
                <p class="code"><b>procedure</b> my_script <b>is</b><br>
     <b>procedure</b> my_proc <b>is</b> -- OK<br>
  ...<br>
  <b>end</b> my_script;
<br>&nbsp;<br></p>
        <div class="code_caption">
                <b>Example</b>: A Main Program Procedure
        </div>
        </div>
        </center>

<p>That is, they must be in a script that has a main procedure block.</p>

        <center>
        <div class="code">
                <p class="code">
  i : integer;<br>
  i := 5;<br>
  <b>procedure</b> my_proc <b>is</b> -- BAD...use a main procedure block<br>
  ...
</p>
        </div>
        </center>

<p>The built-in procedures and functions found in the SparForte
packages may include parameters with other modes.  <tt>in out</tt> mode
means the value of the parameter is used by the subprogram and
may be changed.  <tt>out</tt> mode means the parameter is not read by
the subprogram but a value will be returned using the parameter.
Functions may only use in mode.  The modes are described on the front
page of the <b>Packages</b> section of this documentation.</p>

<p><b>Ada</b>: <tt>in out</tt>, <tt>out</tt> and <tt>access</tt>
mode parameters are not supported for user-defined subprograms.
Named parameters are not supported.  Default values are not
supported.</p>

<h3>Forward Subprograms and Recursion</h3>

<p>Forward declarations and recursion are planned but not yet
implemented.</p>

<h3>Separate Subprograms</h3>

<p>Procedures and functions maybe loaded from a separate file.
(This is referred to as a "subunit": a feature of a script stored
in a separate file).</p>

<p>Copy your subprogram (or create a new one) and put it in a file
with the name of the subprogram.  For example, if you have a
separate procedure called "t2", put it in a file called "t2.sp".
The filename must match the name of the subprogram.</p>

<p>Separate subprograms must begin with a <tt>separate</tt> statement as
the first line in the file.  This indicates that the file is not
an executable script.  The separate statement should include
the name of the parent script.  Each separate subprogram belongs
to a single, specific parent script.</p>


        <center>
        <div class="code">
        <p class="code">
        -- t2.sp is a separate procedure<br>
	<b>separate</b>( t );<br>
        <b>procedure</b> t2 <b>is</b><br>
        <b>begin</b><br>
        &nbsp;&nbsp;put_line( "t2 was called!" );<br>
        <b>end</b> t2;<br>&nbsp;<br>
        <div class="code_caption">
                <b>Example</b>: t2.sp is a loadable by a script named t.sp
        </div>
        </div>
        </center>

<p>In the parent script (the one that will load the subprogram),
declare the subprogram but replace the body of the subprogram
with the word <tt>separate</tt>.</p>

        <center>
        <div class="code">
        <p class="code">
	<b>procedure</b> t <b>is</b><br>
        &nbsp;&nbsp;<b>procedure</b> t2 <b>is</b> <b>separate</b>;<br>
        <b>begin</b><br>
        &nbsp;&nbsp;t2;<br>
        <b>end</b> t;<br>&nbsp;<br>
        <div class="code_caption">
                <b>Example</b>: t.sp loads t2.sp and executes t2
        </div>
        </div>
        </center>

<p>SparForte will search for the separate subprogram using the SparForte
library path.  The path is specified using the <b>-L</b> command option or using
the environment variable <b>SPAR_LIBRARY_PATH</b>.  By default, SparForte
will search the current directory.  The separate subprogram must exist and
be readable in order to load it.</p>

<p>In SparForte, procedures and functions can be nested.  Support for
separate nested subprograms is planned but not yet implemented.</p>

<p>Separate subprogram blocks are similar to include files in other
languages except that the separate block is a part of a specific main
script.</p>

<p><b>Ada</b>: GCC Ada also has separate subunits.  They are implemented
in the same way.</p>

<br>&nbsp;
			</td>
			<td bgcolor="#d3c7f8" width="150" align="right" valign="top"><noscript><hr /></noscript><img src="art/right_menu_top.png" width="150" height="24" alt="[Right Submenu]"><br><a name="submenu"></a>
                                <p class="rmt"><a class="rightmenutext" href="ref_adascript.html">&nbsp;AdaScript versus GCC</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_case.html">&nbsp;Case Sensitivity</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_reserved.html">&nbsp;Reserved Words</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_comments.html">&nbsp;Comments</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_literals.html">&nbsp;Literals</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_shellargs.html">&nbsp;Bourne Shell Word Expansions</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_types.html">&nbsp;Fundamental Types</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_typedecl.html">&nbsp;User-defined Types</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_enum.html">&nbsp;Enumerated Types</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_arrays.html">&nbsp;Arrays</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_records.html">&nbsp;Records</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_assign.html">&nbsp;Basic Assignment</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_specials.html">&nbsp;The @ and % Operands</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_cmdlineargs.html">&nbsp;Command Argument Shortcuts</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_redirection.html">&nbsp;Redirection and Pipelines</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_cmdline.html">&nbsp;Command Line Interaction</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_shellcmds.html">&nbsp;Built-in Shell Commands</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_cd.html">&nbsp;The Current Directory</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_db.html">&nbsp;Database Commands</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_flow.html">&nbsp;Flow of Control</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_other.html">&nbsp;Other Statements/ Subprograms</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_extcmds.html">&nbsp;External Commands</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_subprograms.html">&nbsp;<b>Block Statements and Subprograms</b></a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_sockets.html">&nbsp;TCP/IP Sockets</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_numberformat.html">&nbsp;Numeric Formatting with Put</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_pragmas.html">&nbsp;Interpreter Directives</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_cmdoptions.html">&nbsp;Command Line Options</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_cmdref.html">&nbsp;Command Reference</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_charsets.html">&nbsp;ASCII and Latin_1 Character Sets</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_errors.html">&nbsp;Common Error Messages</a></p>
                                <p class="rmt"><a class="rightmenutext" href="ref_php.html">&nbsp;Common PHP Functions and the SparForte Equivalent</a></p>
			</td>

		</tr>
		<tr>
			<td bgcolor="#d3c7f8" align="left" valign="middle"><a href="#top"><img src="art/up_arrow.png" border="0" width="24" height="27" alt="[Back to Top]"><span>&nbsp;Back To Top</span></a></td>
			<td bgcolor="#d3c7f8" align="center" valign="middle"><img src="art/forte_small.png" width="26" height="32" border="0" alt="[Small Forte Symbol]"></td>
	       	</tr>

	</table>

</body>
</html>
