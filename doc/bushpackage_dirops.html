<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Ken Burtch">
   <meta name="GENERATOR" content="Mozilla/4.78 [en] (X11; U; Linux 2.4.7-10 i686) [Netscape]">
   <title>Business Shell (BUSH) Guide</title>
</head>
<body bgcolor="#CCCC99">

<center>
<img src="bush_title_bar.gif" alt="[BUSH User Guide]" width="710" height="99">
</center>
<!-- h2>
<font color="#777700">
Bush Guide: Part 4 - Built-in Packages</font></h2 -->

<table summary="menu" border="0" cellpadding="0" cellspacing="0"
 width="100%">
<tr>
<td valign="bottom" bgcolor="white">&nbsp;</td>
</tr><tr>
<td valign="bottom" bgcolor="white">
<table summary="menu" border="0" cellpadding="0" cellspacing="0"
 width="100%">
  <tbody>
    <tr bgcolor="white">
      <td align="center"><a href="http://www.pegasoft.ca/bush.html">Home Page</a></td>
      <td align="center"><a href="bushintro.html">Introduction</a></td>
      <td align="center"><a href="bushtutorial.html">Tutorials</a></td>
      <td align="center"><a href="bushref.html">Reference</a></td>
      <td valign="bottom" align="center" bgcolor="#CCCC99"><font size="+1" color="#777700"><b>Packages</b></font></td>
      <td align="center"><a href="bushdetails.html">Hacking</a></td>
    </tr>
  </tbody>
</table>
</td>
</tr>
</table>

<table summary="menu" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td valign="top" width="25%">
&nbsp;<br>
<table summary="menu" border="0" cellpadding="0" cellspacing="0">
  <tr><td>
      <table summary="menu" border="0" cellpadding="0" cellspacing="0">
      <tr>
      <td valign="bottom" align="center" bgcolor="white"><font size="+1" color="#777700"><b>&nbsp;&nbsp;Packages&nbsp;&nbsp;</b></font></td>
      </tr>
      </table>
  </td></tr>
  <tr><td bgcolor="white"><a href="bushpackages.html#4.1">4.1 Using Packages</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_text_io.html#4.2">4.2 text_io (Console I/O)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_text_io.html#4.3">4.3 text_io (File I/O)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_sound.html#4.4">4.4 sound</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_source_info.html#4.5">4.5 source_info</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_system.html#4.6">4.6 System</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_numerics.html#4.7">4.7 numerics</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_strings.html#4.8">4.8 strings</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_command_line.html#4.9">4.9 command_line</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_lock_files.html#4.10">4.10 lock_files</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_cgi.html#4.11">4.11 cgi</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_calendar.html#4.12">4.12 calendar</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_units.html#4.13">4.13 units</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_arrays.html#4.14">4.14 arrays</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_files.html#4.15">4.15 files</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_db.html#4.16">4.16 db (Database)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_stats.html#4.17">4.17 stats</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_pen.html#4.18">4.18 pen</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_mysql.html#4.19">4.19 mysql</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_os.html#4.20">4.20 os</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_dirops.html#4.21">4.21 directory_operations</a></td></tr>
</table>
</td>
<td>
&nbsp;<br>

This part of the guide contains detailed descriptions of the
BUSH built-in packages.
<br>&nbsp;
<h3>
<a NAME="4.21"></a><font color="#777700">4.21 Directory_Operations Package</font></h3>
The directory_operations package provides general functions pretaining to
directories.
<p><u>GCC Ada Equivalent</u>: GNAT.Directory_Operations
<p>Types in the package include:</p>
<ul>
<li><b>directory_operations.dir_name_str</b>: the name of a directory.  A
subtype used in this package to represent string values that are directory
names. A directory name is a prefix for files that appear with in the
directory. This means that for UNIX systems, the string includes a final '/',
and for DOS-like systems, it includes a final '\' character. It can also
include drive letters if the operating system provides for this. The final '/'
or '\' in a Dir_Name_Str is optional when passed as a procedure or function in
parameter.  On OpenVMS, only Unix style path names are supported, not VMS
style, but the directory and file names are not case sensitive.</li>
<li><b>directory_operations.path_name</b>: a pathname. All routines using
Path_Name handle both styles (UNIX and DOS) of directory separators (either
slash or back slash).</li>
<li><b>directory_operations.path_style</b>: the format of a pathname - path_style.unix, path_style.dos, path_style.system_default</li>
<li><b>directory_operations.environment_style</b>: the format for environment variable substitution - environment_style.unix, environment_style.dos, environment_style.both, environment_style.system_default</li>
</ul>
<p>
<hr><b>c := directory_operations.dir_separator</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the directory separator for the operating system.
<br>Example: c := directory_operations.dir_separator; -- returns '/' on Linux
<br>Ada Equivalent: GNAT.Directory_Operations.Dir_Separator
<br>Parameters: none
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>c</td>

<td>return value</td>

<td>character</td>

<td>required</td>

<td>the directory separator character</td>
</tr>
</table>

</td>
</tr>
</table></center>

<p>
<hr><b>directory_operations.change_dir( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Change the current directory.
<br>Example: directory_operations.change_dir( "/tmp" ); -- moves to "/tmp"
<br>Ada Equivalent: GNAT.Directory_Operations.Change_Dir
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname of the directory</td>
</tr>
</table>
</td>
</tr>
</table></center>
<p>An error occurs if the directory does not exist or is not accessible.</p>

<p>
<hr><b>directory_operations.make_dir( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Create a new directory p.
<br>Example: directory_operations.make_dir( "/tmp" ); -- makes "/tmp"
<br>Ada Equivalent: GNAT.Directory_Operations.Make_Dir
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname of the directory</td>
</tr>
</table>
</td>
</tr>
</table></center>
<p>An error occurs if the directory cannot be made.</p>

<p>
<hr><b>directory_operations.remove_dir( p [, r] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Delete directory p.  Delete recursively if r is true.
<br>Example: directory_operations.remove_dir( "/tmp/empty" );
<br>Ada Equivalent: GNAT.Directory_Operations.Remove_Dir
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname of the directory</td>
</tr>

<tr>
<td>r</td>

<td>in</td>

<td>boolean</td>

<td>false</td>

<td>true to remove recursively</td>
</tr>
</table>
</td>
</tr>
</table></center>
<p>An error occurs if the directory does not exist or is not accessible.</p>

<p>
<hr><b>p := directory_operations.get_current_dir</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the current (present) working directory.
<br>Example: p := directory_operations.get_current_dir;
<br>Ada Equivalent: GNAT.Directory_Operations.Get_Current_Dir
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>return value</td>

<td>directory_operations.dir_name_str</td>

<td>required</td>

<td>the current working directory</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.dir_name( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the directory portion of the pathname p.  This is similar to the
UNIX dirname command. Everything after the last directory separator is
removed. If there is no directory separator the current working directory is
returned. Note that the contents of path is case-sensitive on systems that
have case-sensitive file names (like Unix), and non-case-sensitive on systems
where the file system is also non-case-sensitive (such as Windows, and OpenVMS).
<br>Example: s := directory_operations.dir_name( "/tmp/myfile.txt" ); -- returns "/tmp/"
<br>Ada Equivalent: GNAT.Directory_Operations.Dir_Name
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname</td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>directory_operations.dir_name_str</td>

<td>required</td>

<td>the directory portion of the pathname</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.base_name( p [, f] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the full file name portion of the pathname p.  If suffix f exists,
it is removed.
<br>Example: s := directory_operations.base_name( "/tmp/myfile.txt" ); -- returns "myfile.txt"
<br>Ada Equivalent: GNAT.Directory_Operations.Base_Name
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname</td>
</tr>

<tr>
<td>f</td>

<td>in</td>

<td>string</td>

<td>""</td>

<td>the suffix to remove</td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the full file name portion of the pathname</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.file_extension( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the file suffix portion of the pathname p.  The suffix is the
string after the last dot, including the dot itself. For example, if the
file name is "file1.xyz.adq", then the returned value would be ".adq". If no
dot is present in the file name, or the last character of the file name is a
dot, then the null string is returned.
<br>Example: s := directory_operations.file_extension( "/tmp/myfile.txt" ); -- returns ".txt"
<br>Ada Equivalent: GNAT.Directory_Operations.File_Extension
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname</td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the file suffix portion of the pathname</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.file_name( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the file name without an extension from the pathname p.  This is
equivalent to Base_Name with default extension value.
<br>Example: s := directory_operations.dir_name( "/tmp/myfile.txt" ); -- returns "myfile"
<br>Ada Equivalent: GNAT.Directory_Operations.File_Name
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname</td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the file name without suffix</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.format_pathname( p [,t] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Convert a pathname to an operating system.  If style t is not specified,
it uses the default for the system. Removes all double directory separator and
converts all '\' to '/' if t is UNIX and converts all '/' to '\' if t
is set to DOS. This function will help to provide a consistent naming scheme
running for different environments. If t is set to System_Default the
routine will use the default directory separator on the running environment.
<br>Example: s := directory_operations.format_pathname( "/tmp", path_style.dos ); -- returns "\tmp"
<br>Ada Equivalent: GNAT.Directory_Operations.Format_Pathname
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname of the file</td>
</tr>

<tr>
<td>t</td>

<td>in</td>

<td>string</td>

<td>path_style.system_default</td>

<td>the operating system to convert to</td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>directory_operations.path_name</td>

<td>required</td>

<td>the new pathname</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := directory_operations.expand_path( p [,t] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Expand variables in a pathname, substituting environment variables.  This
will not substitute BUSH variables but rather variables that are available for
import from the previous environment.  Returns Path with environment variables
(or logical names on OpenVMS) replaced by the current environment variable
value. For example, $HOME/mydir will be replaced by /home/joe/mydir if $HOME
environment variable is set to /home/joe and Mode is UNIX. If an environment
variable does not exists the variable will be replaced by the empty string.
Two dollar or percent signs are replaced by a single dollar/percent sign. Note
that a variable must start with a letter.
<br>Example: s := directory_operations.expand_path( "$HOME/tmp", environment_style.unix );
<br>Ada Equivalent: GNAT.Directory_Operations.Expand_Path
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the pathname of the file</td>
</tr>

<tr>
<td>t</td>

<td>in</td>

<td>string</td>

<td>environment_style.system_default</td>

<td>the style of operating system substitutions </td>
</tr>

<tr>
<td>s</td>

<td>return value</td>

<td>directory_operations.path_name</td>

<td>required</td>

<td>the new pathname</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>&nbsp;<a href="#top">Back to Top</a></p>
</td>
</tr>
</table>

</body>
</html>
