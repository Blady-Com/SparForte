<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Ken Burtch">
   <meta name="GENERATOR" content="Mozilla/4.78 [en] (X11; U; Linux 2.4.7-10 i686) [Netscape]">
   <title>Business Shell (BUSH) Guide</title>
</head>
<body bgcolor="#CCCC99">

<center>
<img src="bush_title_bar.gif" alt="[BUSH User Guide]" width="710" height="99">
</center>
<!-- h2>
<font color="#777700">
Bush Guide: Part 4 - Built-in Packages</font></h2 -->

<table summary="menu" border="0" cellpadding="0" cellspacing="0"
 width="100%">
<tr>
<td valign="bottom" bgcolor="white">&nbsp;</td>
</tr><tr>
<td valign="bottom" bgcolor="white">
<table summary="menu" border="0" cellpadding="0" cellspacing="0"
 width="100%">
  <tbody>
    <tr bgcolor="white">
      <td align="center"><a href="http://www.pegasoft.ca/bush.html">Home Page</a></td>
      <td align="center"><a href="bushintro.html">Introduction</a></td>
      <td align="center"><a href="bushtutorial.html">Tutorials</a></td>
      <td align="center"><a href="bushref.html">Reference</a></td>
      <td valign="bottom" align="center" bgcolor="#CCCC99"><font size="+1" color="#777700"><b>Packages</b></font></td>
      <td align="center"><a href="bushdetails.html">Hacking</a></td>
    </tr>
  </tbody>
</table>
</td>
</tr>
</table>
<table summary="menu" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td valign="top" width="25%">
&nbsp;<br>
<table summary="menu" border="0" cellpadding="0" cellspacing="0">
  <tr><td>
      <table summary="menu" border="0" cellpadding="0" cellspacing="0">
      <tr>
      <td valign="bottom" align="center" bgcolor="white"><font size="+1" color="#777700"><b>&nbsp;&nbsp;Packages&nbsp;&nbsp;</b></font></td>
      </tr>
      </table>
  </td></tr>
  <tr><td bgcolor="white"><a href="bushpackages.html#4.1">4.1 Using Packages</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_text_io.html#4.2">4.2 text_io (Console I/O)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_text_io.html#4.3">4.3 text_io (File I/O)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_sound.html#4.4">4.4 sound</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_source_info.html#4.5">4.5 source_info</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_system.html#4.6">4.6 System</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_numerics.html#4.7">4.7 numerics</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_strings.html#4.8">4.8 strings</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_command_line.html#4.9">4.9 command_line</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_lock_files.html#4.10">4.10 lock_files</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_cgi.html#4.11">4.11 cgi</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_calendar.html#4.12">4.12 calendar</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_units.html#4.13">4.13 units</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_arrays.html#4.14">4.14 arrays</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_files.html#4.15">4.15 files</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_db.html#4.16">4.16 db (Database)</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_stats.html#4.17">4.17 stats</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_pen.html#4.18">4.18 pen</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_mysql.html#4.19">4.19 mysql</a></td></tr></table>
  <tr><td bgcolor="white"><a href="bushpackage_os.html#4.20">4.20 os</a></td></tr>
  <tr><td bgcolor="white"><a href="bushpackage_dirops.html#4.21">4.21 directory_operations</a></td></tr>
</td>
<td>
&nbsp;<br>

This part of the guide contains detailed descriptions of the
BUSH built-in packages.
<br>&nbsp;
<h3>
<a NAME="4.11"></a><font color="#777700">4.11 cgi Package</font></h3>
The BUSH CGI package is based on and uses David A. Wheeler's AdaCGI package.
It provides form processing, string encoding, and cookie operations.
<p>Using the CGI package, programmers can write scripts that run when invoked
by web servers using the Common Gateway Interface (CGI). Bush's large feature
set and strong error checking make it ideal for writing web server applications.
<p>The examples directory contains a script called minimal_cgi, a CGI script
that displays form variables.
<pre>procedure minimal_cgi is
&nbsp; -- Demonstrate Bush's CGI interface
&nbsp; -- based on AdaCGI's minimal.adb example

&nbsp; -- To run this script directly (without a HTTP server), set the
&nbsp; -- environment variable REQUEST_METHOD to "GET" and the variable
&nbsp; -- QUERY_STRING to either "" or "x=a&amp;y=b".

begin
&nbsp; cgi.put_cgi_header;
&nbsp; cgi.put_html_head( "Minimal Form Demonstration" );
&nbsp; if cgi.input_received then
&nbsp;&nbsp;&nbsp;&nbsp; cgi.put_variables;
&nbsp; else
&nbsp;&nbsp;&nbsp;&nbsp; put_line( "&lt;form method=" &amp; ASCII.Quotation &amp; "POST" &amp; ASCII.Quotation &amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "&gt;What's your name?&lt;input name=" &amp; ASCII.Quotation &amp; "username" &amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ASCII.Quotation &amp; "&gt;&lt;input type=" &amp; ASCII.Quotation &amp; "submit" &amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ASCII.Quotation &amp; "&gt;&lt;/form&gt;" );
&nbsp; end if;
&nbsp; cgi.put_html_tail;
end minimal_cgi;</pre>
To run it without a web server, define exported strings QUERY_STRING and
REQUEST_METHOD. If there is no information to process (QUERY_STRING is
an empty string) it will return a form, otherwise it will display the value
of the CGI variables.
<pre>
=&gt; QUERY_STRING : string := ""
=&gt; pragma export( shell, QUERY_STRING )
=&gt; REQUEST_METHOD : string := "GET"
=&gt; pragma export( shell, REQUEST_METHOD )
=&gt; bush examples/minimal_cgi.bush
content_type: text/html

&lt;html&gt;&lt;head&gt;&lt;title&gt;Minimal Form Demonstration&lt;/title&gt;
&lt;/head&gt;&lt;body&gt;
&lt;form method="POST"&gt;What's your name?&lt;input name="username"&gt;&lt;input type="submit"&gt;&lt;/form&gt;
&lt;/body7gt;&lt;/html&gt;
=&gt; QUERY_STRING : string := "x=a&amp;y=b"
=&gt; bush examples/minimal_cgi.bush
content_type: text/html

&lt;html&gt;&lt;head&gt;&lt;title&gt;Minimal Form Demonstration&lt;/title&gt;
&lt;/head&gt;&lt;body&gt;
&lt;pre&gt;
&lt;b&gt;x&lt;/b&gt;: &lt;i&gt;a&lt;/i&gt;
&lt;b&gt;y&lt;/b&gt;: &lt;i&gt;b&lt;/i&gt;
&lt;/pre&gt;
&lt;/body&gt;&lt;/html&gt;</pre>
The CGI package uses the standard Ada types except for one additional enumerated
type:
<ul>
<li>
<b>type</b> cgi.cgi_method_type <b>is</b> (cgi.get, cgi.post, cgi.unknown);
-- the form posting method</li>
</ul>
To use cgi_method_type or its elements, prefix the items with "cgi." as
you would with any other package declaration.
<p>
<hr><b>b := cgi.parsing_errors</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>True if there were errors parsing.
<br>Example: if cgi.parsing_errors then ...
<br>Ada Equivalent: CGI.Parsing_Errors
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>b</td>

<td>return value</td>

<td>boolean</td>

<td>required</td>

<td>true if there were parsing errors</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>b := cgi.input_received</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>True if there were CGI variables passed to the script.
<br>Example: if cgi.input_received then ...
<br>Ada Equivalent: CGI.Input_Received
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>b</td>

<td>return value</td>

<td>boolean</td>

<td>required</td>

<td>true if there was input received</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>b := cgi.is_index</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>True if an "IsIndex" request was made.
<br>Example: if cgi.is_index ...
<br>Ada Equivalent: CGI.Is_Index
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>b</td>

<td>return value</td>

<td>boolean</td>

<td>required</td>

<td>true if a "IsIndex" request was made</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>m := cgi.cgi_method</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Identify the CGI standard that was used to communicate with the web
server.
<br>Example: if cgi.cgi_method = cgi.get then ...
<br>Ada Equivalent: CGI.CGI_Method
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>m</td>

<td>return value</td>

<td>cgi.cgi_method_type</td>

<td>required</td>

<td>the method (cgi.get, cgi.post or cgi.unknown)</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := cgi.value( v, i, b )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the value of a CGI variable (a form field).
<br>Example: username := cgi.value( "username" );
<br>Ada Equivalent: CGI.Value
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the value of the variable</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the name of the variable</td>
</tr>

<tr>
<td>i</td>

<td>in</td>

<td>positive</td>

<td>1</td>

<td>which variable (1 = first match, 2 = second match, etc.)</td>
</tr>

<tr>
<td>r</td>

<td>in</td>

<td>boolean</td>

<td>false</td>

<td>if true, an exception will be raised if the variable is missing, otherwise
an empty string is returned</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>b := cgi.key_exists( v )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return true if a CGI variable (a form field) exists.
<br>Example: if cgi.key_exists( "credit_card_expiry_date" ) then ...
<br>Ada Equivalent: CGI.Key_Exists
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>b</td>

<td>return value</td>

<td>boolean</td>

<td>required</td>

<td>true if the variable exists</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the variable to check</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.key_count( v )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the number of times the variable name (or name of a form field)
occurs.
<br>Example: for k in 1..cgi.key_count( "phone_number" ) loop ...
<br>Ada Equivalent: CGI.Key_Count
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>n</td>

<td>return value</td>

<td>natural</td>

<td>required</td>

<td>the number of occurrences</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the variable to check</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.argument_count</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the total number of variables, including duplicates with the
same name. occurs.
<br>Example: for k in 1..cgi.argument_count loop ...
<br>Ada Equivalent: CGI.Argument_Count
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>n</td>

<td>return value</td>

<td>natural</td>

<td>required</td>

<td>the number of variables</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := cgi.key( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the name of pth CGI variable.
<br>Example: first_variable := cgi.key( 1 );
<br>Ada Equivalent: CGI.Key
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the CGI variable name</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>positive</td>

<td>required</td>

<td>the variable position (1..cgi.argument_count). A bad value will raise
an exception.</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.key_value( p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the value of the pth CGI variable.
<br>Example: first_value := cgi.key_value( 1 );
<br>Ada Equivalent: CGI.Value (NOTE: a different name)
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the variable value</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>positive</td>

<td>required</td>

<td>the position of the variable (1..cgi.argument_count)</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>b := cgi.key_value_exists( v, s )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>True if a CGI variable v has value s.
<br>Example: if cgi.key_value_exists( "country", "US" ) then ...
<br>Ada Equivalent: CGI.Key_Value_Exists
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>b</td>

<td>return value</td>

<td>boolean</td>

<td>required</td>

<td>true if the variable has the value</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the CGI variable</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the value to test for</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_cgi_header( h )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Write the CGI header to current_output, including two carriage returns.
This header determines the form of the program's reply (by default, an
HTML document).
<br>Example: first_value := cgi.key_value( 1 );
<br>Ada Equivalent: CGI.Value (NOTE: a different name)
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>h</td>

<td>in</td>

<td>string</td>

<td>Content-type: text/html</td>

<td>the CGI header to use</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_html_head( t, m )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Write a simple HTML header to current_output, including a title and
optional mailto link to the page author.
<br>Example: cgi.put_html_head( "Search results", "itdept@yourorg.com"
)
<br>Ada Equivalent: CGI.Put_HTML_Head
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>t</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the page title</td>
</tr>

<tr>
<td>m</td>

<td>in</td>

<td>string</td>

<td>no mailto</td>

<td>the email address of the author</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_html_heading( s, l )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Write a simple HTML &lt;h1> to &lt;h6> heading.
<br>Example: cgi.put_html_heading( "OmniCorp Sales Statistics", 1 )
<br>Ada Equivalent: CGI.Value (NOTE: a different name)
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the heading text</td>
</tr>

<tr>
<td>l</td>

<td>in</td>

<td>positive</td>

<td>required</td>

<td>the heading level (1..6)</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_html_tail</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Complete an HTML document by writing " to current_output.
<br>Example: cgi.put_html_tail;
<br>Ada Equivalent: CGI.Put_HTML_Tail;
<br>Parameters:
<br>none</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_error_message( s )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Write a short HTML document containing an error message. Use cgi.put_cgi_header
first.
<br>Example: cgi.put_error_message( "the disk is full" )
<br>Ada Equivalent: CGI.Put_Error_Message
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the error message</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.put_variables</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Display the CGI variables in HTML format. Use for debugging.
<br>Example: cgi.put_variables;
<br>Ada Equivalent: CGI.Put_Variables;
<br>Parameters:
<br>none</td>
</tr>
</table></center>

<p>
<hr><b>s := cgi.my_url</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the URL of the script.
<br>Example: script_url := cgi.my_url;
<br>Ada Equivalent: CGI.My_URL
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the URL of the script</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.line_count( s )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Count the number of lines is value s, 0 if an empty string.
<br>Example: if cgi.line_count( address ) > 4 then ...
<br>Ada Equivalent: CGI.Line_Count
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>n</td>

<td>return value</td>

<td>natural</td>

<td>required</td>

<td>the number of lines (0 if null string)</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the string to test</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.line_count_of_value( v )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Count the number of lines in the value of variable v, 0 if an empty
string.
<br>Example: if cgi.line_count_of_value( address ) > 4 then ...
<br>Ada Equivalent: CGI.Line_Count_Of_Value
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>n</td>

<td>return value</td>

<td>natural</td>

<td>required</td>

<td>the number of lines (0 if null string)</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the CGI variable to test</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>l := cgi.line( s, p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the pth line of string s.
<br>Example: second_line := cgi.line( address, 2 );
<br>Ada Equivalent: CGI.Line
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>l</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the line</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the CGI variable value to get the line from</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>positive</td>

<td>required</td>

<td>the line number (1..cgi.line_count). A bad value raises an exception.</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>l := cgi.value_of_line( v, p )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the pth line of the value of CGI variable v.
<br>Example: second_line := cgi.line( "address", 2 );
<br>Ada Equivalent: CGI.Value_Of_Line
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>l</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the line</td>
</tr>

<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the CGI variable to get the line from</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>positive</td>

<td>required</td>

<td>the line number (1..cgi.line_count). A bad value raises an exception.</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := cgi.url_decode( u, b )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Decode HTML-encoded %HH hexadecimal characters into their corresponding
ASCII characters. If b is true, translate plus signs to spaces.
<br>Example: s := cgi.url_decode( encoded_url );
<br>Ada Equivalent: CGI.URL_Decode
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the decoded string</td>
</tr>

<tr>
<td>u</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the URL-encoded string</td>
</tr>

<tr>
<td>b</td>

<td>in</td>

<td>boolean</td>

<td>true</td>

<td>translate plus signs to spaces if true</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>u := cgi.url_encode( s, b )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Encode the string using %HH hexadecimal characters. If b is true, translate
plus signs to spaces.
<br>Example: encoded_url := cgi.url_encode( s );
<br>Ada Equivalent: CGI.URL_Decode
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>u</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the URL-encoded string</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the string to encode</td>
</tr>

<tr>
<td>b</td>

<td>in</td>

<td>boolean</td>

<td>true</td>

<td>translate plus signs to spaces if true</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>h := cgi.html_encode( s )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Encode the string escaping illegal HTML characters. For example, '&gt;'
becomes &gt;).
<br>Example: safe_html := cgi.html_encode( "This is &lt;illegal&gt; HTML!"
);
<br>Ada Equivalent: CGI.HTML_Encode
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>h</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the HTML-encoded string</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the string to encode</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>cgi.set_cookie( v, s, x, p, d, b )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Set a cookie's properties. Call this before Put_CGI_Header.
<br>Example: cgi.set_cookie( "last_visit", "none" );
<br>Ada Equivalent: CGI.Set_Cookie
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>v</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the cookie name</td>
</tr>

<tr>
<td>s</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the cookie value</td>
</tr>

<tr>
<td>x</td>

<td>in</td>

<td>string</td>

<td>none</td>

<td>the expiry date</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>string</td>

<td>PATH_INFO value</td>

<td>the cookie path</td>
</tr>

<tr>
<td>d</td>

<td>in</td>

<td>string</td>

<td>SERVER_NAME value</td>

<td>the domain value</td>
</tr>

<tr>
<td>b</td>

<td>in</td>

<td>boolean</td>

<td>false</td>

<td>true if secure</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>s := cgi.cookie_value( c [, p] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Get the value of pth instance of cookie c.
<br>Example: cookie := cgi.cookie_value( "date_visited" );
<br>Ada Equivalent: CGI.Cookie_Value
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>string</td>

<td>required</td>

<td>the cookie value</td>
</tr>

<tr>
<td>c</td>

<td>in</td>

<td>string</td>

<td>required</td>

<td>the cookie name</td>
</tr>

<tr>
<td>p</td>

<td>in</td>

<td>positive</td>

<td>1</td>

<td>the instance of the cookie name</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>
<hr><b>n := cgi.cookie_count( c [, p] )</b>
<center><table CELLSPACING=0 CELLPADDING=0 WIDTH="95%" NOSAVE >
<tr>
<td>
<br>Return the number of cookies.
<br>Example: for i in 1..cgi.cookie_count loop ...
<br>Ada Equivalent: CGI.Cookie_Count
<br>Parameters:
<table CELLSPACING=0 CELLPADDING=0 WIDTH="80%" NOSAVE >
<tr>
<td>s</td>

<td>return value</td>

<td>natural</td>

<td>required</td>

<td>the number of cookies</td>
</tr>
</table>
</td>
</tr>
</table></center>

<p>cgi.get_environment is not implemented: it is already available through
the command_line package.

<p>&nbsp;<a href="#top">Back to Top</a></p>
</td>
</tr>
</table>

</body>
</html>
